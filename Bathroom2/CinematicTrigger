using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class CinematicTrigger : MonoBehaviour
{
    /**
     *  씬으로 넘어오자마자 NPC 애니메이션과 TTS 음성을 출력
     **/

    public Animator npcAnimator;
    public string animationTriggerName = "Talk"; // 믹사모 애니메이션 파라미터 이름

    public AudioSource ttsSource;
    public AudioClip ttsClip;

    void Start()
    {
        // 씬으로 넘어오자마자 1초 뒤에 시네마틱 시작
        StartCoroutine(PlayCienmatic(1.0f));
    }

    IEnumerator PlayCienmatic(float delay)
    {
        // 지정된 시간 대기
        yield return new WaitForSeconds(delay);


        // 믹사모 애니메이션실행
        if (npcAnimator != null)
        {
            npcAnimator.SetTrigger(animationTriggerName);
            Debug.Log("믹사모 애니메이션 실행");
        }

        // TTS 음성 재생 (애니메이션이랑 동시에 실행)
        if (ttsSource != null && ttsClip != null)
        {
            ttsSource.clip = ttsClip;
            ttsSource.Play();
            Debug.Log("TTS 재생");
        }
    }


    // Update is called once per frame
    void Update()
    {
        
    }
}
